<ul class="nav nav-pills pull-right">
    <li>
        <a class="btn-warning" href="/performance/edit?id=<?= $this->performance->getId(); ?>"><i class="icon-magic"></i> Edit Performance</a>
    </li>

    <li>
        <a class="btn-info" href="/audit/entity/<?= $this->performance->getId(); ?>/Db\Entity\Performance">
            <i class="icon-list"></i>
        </a>
    </li>
</ul>

<h1>
    <i class="icon-magic"></i>
<?php
if ($this->performance->getPerformanceDateAt()->format('F d, Y') != 'September 1, 1939') {
    echo $this->escapeHtml($this->performance->getPerformanceDateAt()->format('F d, Y'));
} else {
    echo $this->escapeHtml($this->performance->getPerformanceDate());
}
?>

    <?= $this->escapeHtml($this->performance->getName()); ?>
</h1>

<h1>
    <a href="/band/detail?id=<?= $this->performance->getLineup()->getBand()->getId(); ?>">
        <i class="icon-cogs"></i>
        <?= $this->escapeHtml($this->performance->getLineup()->getBand()->getName()); ?>
    </a>
</h1>

<h1>
    <a href="/venue/detail?id=<?= $this->performance->getVenue()->getId(); ?>">

        <i class="icon-map-marker"></i>
        <?= $this->escapeHtml($this->performance->getVenue()->getName()); ?>
    </a>
</h1>

<h3>
    <a href="/lineup/detail?id=<?= $this->performance->getLineup()->getId(); ?>">
        <i class="icon-group"></i>
        <?= $this->escapeHtml($this->performance->getLineup()->getName()); ?>
    </a>
</h3>

<?php
foreach ($this->performance->getLineup()->getPerformers() as $performer) {
?>
    <h3>
        &nbsp;&nbsp;&nbsp;
        <a href="/performer/detail?id=<?= $performer->getId(); ?>">
            <i class="icon-film"></i>
            <?= $this->escapeHtml($performer->getName()); ?>
        </a>
    </h3>

<?php
}
?>

<?php
if (sizeof($this->performance->getPerformers())) {
?>
    <h3>
        <i class="icon-group"></i>
        Guest Performers
    </h3>
<?php
}

foreach ($this->performance->getPerformers() as $performer) {
?>
    <h3>
        &nbsp;&nbsp;&nbsp;
        <a href="/performer/detail?id=<?= $performer->getId(); ?>">
            <i class="icon-film"></i>
            <?= $this->escapeHtml($performer->getName()); ?>
        </a>
    </h3>

<?php
}
?>


<?php
if ($this->performance->getNote()) { ?>
    <pre><?= $this->escapeHtml($this->performance->getNote()); ?></pre>
<?php
}
?>

<?php
foreach ($this->performance->getPerformanceSets() as $set) {
?>
    <h2>
        <i class="icon-certificate"></i>
        <a href="/performance-set/detail?id=<?= $set->getId(); ?>">
            <?= $this->escapeHtml($set->getName()); ?>
        </a>
    </h3>

    <?php
    if (sizeof($set->getPerformanceSongs())) {
        $count = 1;
        foreach ($set->getPerformanceSongs() as $performanceSong) {
    ?>
            <div class="row">
                <div class="span1">
                    <pre><?= $count ++; ?></pre>
                </div>

                <div class="span5">
                    <pre><a href="/song/detail?id=<?= $performanceSong->getSong()->getId(); ?>"><i class="icon-music"></i> <?= $this->escapeHtml($performanceSong->getSong()->getName()); ?></a><?php if ($performanceSong->getIsSegue()) echo ' &gt; '; ?></pre>
                </div>

                <div class="span6">
                    <pre><?= $this->escapeHtml($performanceSong->getNote()); ?>&nbsp;</pre>
                </div>
            </div>

    <?php
        }
    }
    ?>

    <?php
    if ($set->getNote()) {
    ?>
        <pre><?= $this->escapeHtml($set->getNote()); ?></pre>
    <?php
    }
    ?>

<?php
}
?>
</ul>

<ul class="nav nav-tabs" id="tabs">
    <li class="active">
        <a href="#comments" data-toggle="tab">
            Comments
        </a>
    </li>

    <li class="">
        <a href="#links" data-toggle="tab">
            Links
        </a>
    </li>
</ul>

<div class="tab-content">
   <div class="tab-pane active" id="comments">
        <ul class="nav nav-pills">
            <?= $this->createComment($this->performance->getId(), 'Db\Entity\Performance', '/performance/detail?id=' . $this->performance->getId()); ?>
        </ul>

        <?= $this->listComments($this->performance->getComments()); ?>
    </div>

    <div class="tab-pane" id="links">
        <ul class="nav nav-pills">
            <?= $this->createLink($this->performance->getId(), 'Db\Entity\Performance', '/performance/detail?id=' . $this->performance->getId()); ?>
        </ul>
    </div>
</div>
